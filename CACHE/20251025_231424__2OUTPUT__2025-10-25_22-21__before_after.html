<!DOCTYPE html>
    <html><head><meta charset="utf-8"><title>Before/After Category Visualization</title>
    <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:12px}
    h1{margin-top:0}
    .wrap{display:flex;gap:18px}
    .panel{flex:1;min-width:45%}
    .tree{list-style:none;padding-left:18px}
    .tree li{margin:3px 0}
    .tree li span{cursor:pointer}
    .level1>span{font-weight:bold}
    .moved{background:#e6f2ff}
    .newcat{background:#e9ffe6}
    .empty{color:#888}
    input#q{width:360px;padding:6px}
    .small{color:#666}
    table{border-collapse:collapse;margin:12px 0}
    th,td{border:1px solid #ddd;padding:6px}
    </style></head>
    <body>
    <h1>Before / After Structure</h1>
    <p class="small">Click any node to collapse/expand. Use the search box to filter.</p>
    <input id="q" placeholder="Search categories, subcategories, or artists..." />
    
    <h3>Metrics</h3>
    <ul>
      <li><b>Global Consistency Index:</b> 0.0</li>
      <li><b>Total Duplicate Artists:</b> 0</li>
      <li><b>Orphan Folders Detected:</b> 0</li>
    </ul>
    <details><summary>Show Duplicates</summary><ul><li>None</li></ul></details>
    <details><summary>Show Orphans</summary><ul><li>None</li></ul></details>
    
    <div class="wrap">
      <div class="panel">
        <h2>Before</h2>
        <ul class="tree">
</ul>
      </div>
      <div class="panel">
        <h2>After</h2>
        <ul class="tree">
</ul>
      </div>
    </div>
    <script>
    // collapse/expand
    document.querySelectorAll('.tree li span').forEach(s=>{
      s.addEventListener('click', ()=>{
        const ul = s.parentElement.querySelector('ul');
        if(ul){ ul.style.display = (ul.style.display==='none'?'block':'none'); }
      });
    });
    // search
    function filterTree(q){
      q = q.toLowerCase();
      document.querySelectorAll('.tree li').forEach(li=>{
        const t = li.textContent.toLowerCase();
        li.style.display = t.indexOf(q) >= 0 ? 'list-item':'none';
      });
    }
    document.getElementById('q').addEventListener('input', e=>filterTree(e.target.value));
    </script>
    </body></html>
    